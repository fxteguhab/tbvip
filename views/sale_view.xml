<openerp>
	<data>

		<record model="ir.ui.view" id="sale_view_order_form_inherit">
			<field name="name">sale.view.order.form.inherit</field>
			<field name="model">sale.order</field>
			<field name="priority">17</field>
			<field name="inherit_id" ref="sale.view_order_form"/>
			<field name="arch" type="xml">
				<field name="date_order" position="replace"/>
				<field name="partner_id" position="before">
					<field name="date_order" on_change="onchange_bon_number(bon_number, date_order)"/>
					<field name="bon_number" on_change="onchange_bon_number(bon_number, date_order)"
							attrs="{'readonly': [('state','in',['manual','shipping_except','invoice_except','done'])]}"/>
					<field name="employee_id" readonly="True"/>
				</field>

				<field name="client_order_ref" position="replace"/>
				<field name="shipped_or_taken" position="after">
					<field name="client_order_ref"/>
				</field>
				<field name="pricelist_id" position="attributes">
					<attribute name="invisible">True</attribute>
				</field>
				<field name="currency_id" position="attributes">
					<attribute name="invisible">True</attribute>
				</field>
				<field name="sale_discount" position="attributes">
					<attribute name="invisible">True</attribute>
				</field>
				<field name="line_discounts" position="attributes">
					<attribute name="invisible">True</attribute>
				</field>
				<field name="warehouse_id" position="attributes">
					<attribute name="invisible">True</attribute>
				</field>
				
				<xpath expr="/form/sheet/notebook/page[1]/field[@name='order_line']/tree/field[@name='price_type_id']"
						position="attributes">
					<attribute name="on_change">
						onchange_product_tbvip(parent.pricelist_id,product_id,product_uom_qty,product_uom,
						product_uos_qty,False,name,parent.partner_id, False, True, parent.date_order,
						product_packaging, parent.fiscal_position, False, parent.warehouse_id,
						parent.price_type_id, price_type_id, context)
					</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page[1]/field[@name='order_line']/tree/field[@name='product_id']"
						position="attributes">
					<attribute name="options">{'no_create': 1}</attribute>
					<attribute name="on_change">
						onchange_product_id_tbvip(parent.pricelist_id,product_id,product_uom_qty,product_uom,
						product_uos_qty,False,name,parent.partner_id, False, True, parent.date_order,
						product_packaging, parent.fiscal_position, False, parent.warehouse_id,
						parent.price_type_id, price_type_id, context)
					</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page[1]/field[@name='order_line']/tree/field[@name='product_uom']"
						position="attributes">
					<attribute name="domain">[('category_id','=', uom_category_filter_id)]</attribute>
					<attribute name="on_change">
						onchange_product_tbvip(parent.pricelist_id,product_id,product_uom_qty,product_uom,
						product_uos_qty,False,name,parent.partner_id, False, True, parent.date_order,
						product_packaging, parent.fiscal_position, False, parent.warehouse_id,
						parent.price_type_id, price_type_id, context)
					</attribute>
				</xpath>
				<xpath expr="//page[@string='Order Lines']" position="after">
					<page string="Payment Method">
						<group name="method_cash" col="4">
							<field name="is_payment_cash"/>
							<field name="cash_amount" attrs="{'invisible': [('is_payment_cash','=',False)],'required': [('is_payment_cash','=',False)]}"/>
							<field name="is_payment_transfer"/>
							<field name="transfer_amount" attrs="{'invisible': [('is_payment_transfer','=',False)],'required': [('is_payment_transfer','=',False)]}"/>
							<field name="is_payment_edc"/>
							<field name="edc_amount" attrs="{'invisible': [('is_payment_edc','=',False)],'required': [('is_payment_edc','=',False)]}"/>
							<field name="approval_code" attrs="{'invisible': [('is_payment_edc','=',False)]}"/>
							<field name="card_fee" attrs="{'invisible': [('is_payment_edc','=',False)]}"/>
							<field name="card_fee_amount" readonly="1" attrs="{'invisible': [('is_payment_edc','=',False)]}"/>
						</group>
					</page>
				</xpath>
				<xpath expr="//page[@string='Other Information']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
			</field>
		</record>

		<record model="ir.ui.view" id="view_order_form_inherit">
			<field name="name">sale.order.form.inherit</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="purchase_sale_discount.view_order_form_inherit"/>
			<field name="arch" type="xml">
				<field name="user_id" position="attributes">
					<attribute name="invisible">1</attribute>
				</field>
				<xpath expr="//field[@name='order_line']/tree//field[@name='discount']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="//field[@name='order_line']/tree//field[@name='discount_string']" position="after">
					<field name="commission" invisible="1"/>
					<field name="commission_amount" invisible="1"/>
					<field name="uom_category_filter_id" invisible="1"/>
				</xpath>
				<xpath expr="//field[@name='order_line']/tree//field[@name='name']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="//field[@name='order_line']/tree//field[@name='tax_id']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
			</field>
		</record>

		<record id="view_order_tree_inherit" model="ir.ui.view">
			<field name="name">sale.order.tree.inherit</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="sale.view_order_tree"/>
			<field name="arch" type="xml">
				<field name="amount_total" position="before">
					<field name="commission_total"/>
				</field>
			</field>
		</record>

		<record model="ir.ui.view" id="sale_order_filter_inherit">
			<field name="name">sale.order.list.select.inherit</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="sale.view_sales_order_filter"/>
			<field name="arch" type="xml">
				<field name="name" position="after">
					<field name="bon_number" string="Bon Number"/>
				</field>
			</field>
		</record>
	</data>
</openerp>
