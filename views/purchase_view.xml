<openerp>
	<data>
		<record model="ir.ui.view" id="purchase_order_form_inherit">
			<field name="name">purchase.order.form.inherit</field>
			<field name="model">purchase.order</field>
			<field name="priority">17</field>
			<field name="inherit_id" ref="purchase.purchase_order_form"/>
			<field name="arch" type="xml">
				<button name="print_quotation" position="after">
					<button name="print_draft_purchase_order" string="" states="draft" type="object" icon="gtk-print"/>
				</button>
				<field name="partner_id" position="before">
					<field name="branch_id" on_change="onchange_branch_id(branch_id)" />
				</field>
				<field name="date_order" position="after">
					<field name="delivered_date"/>
				</field>
				<field name="partner_id" position="attributes">
					<attribute name="options">{'no_create': True}</attribute>
				</field>
				<field name="picking_type_id" position="attributes">
					<attribute name="invisible">True</attribute>
					<attribute name="domain">[('code','=','incoming')]</attribute>
					<attribute name="groups">stock.group_locations</attribute>
					<attribute name="options">{'no_create': 1}</attribute>
					<attribute name="on_change">onchange_picking_type_id(picking_type_id, context)</attribute>
				</field>
				<field name="price_unit" position="attributes">
					<attribute name="on_change">onchange_order_line(product_qty, price_unit, discount_string, product_uom, product_id, discount_from_subtotal)</attribute>
				</field>
				<field name="date_order" position="before">
					<field name="create_uid" readonly="1"/>
				</field>
				<xpath expr="//label[@string='Request for Quotation ']" position="attributes">
					<attribute name="string">Draft Purchase Order</attribute>
				</xpath>
				<xpath expr="//field[@name='product_uom']" position="attributes">
					<attribute name="string">UoM</attribute>
				</xpath>
				<xpath expr="//field[@name='price_subtotal']" position="after">
					<field name="source" readonly="1" />
				</xpath>
				<field name="pricelist_id" position="attributes">
					<attribute name="invisible">True</attribute>
				</field>
				<field name="payment_term_id" position="replace"/>
				<field name="picking_type_id" position="before">
					<field name="shipped_or_taken"/>
					<field name="payment_term_id"/>
				</field>
				<xpath expr="//field[@name='order_line']/tree//field[@name='name']" position="attributes">
					<attribute name="invisible">True</attribute>
				</xpath>
				<field name="source" position="attributes">
					<attribute name="invisible">True</attribute>
				</field>
				<xpath expr="//field[@name='order_line']/tree//field[@name='product_qty']" position="attributes">
					<attribute name="on_change">onchange_order_line(product_qty, price_unit, discount_string, product_uom, product_id, discount_from_subtotal)</attribute>
				</xpath>
				<xpath expr="//field[@name='order_line']/tree//field[@name='price_type_id']" position="attributes">
					<attribute name="on_change">
						onchange_product_tbvip(parent.pricelist_id,product_id,product_qty,product_uom,parent.partner_id,
						parent.date_order,parent.fiscal_position,date_planned,False,False,parent.state,
						parent.price_type_id,price_type_id,discount_from_subtotal,context)
					</attribute>
				</xpath>
				<field name="product_id" position="attributes">
					<attribute name="options">{'no_create': 1}</attribute>
					<attribute name="on_change">
						onchange_product_id_tbvip(parent.pricelist_id,product_id,product_qty,product_uom,parent.partner_id,
						parent.date_order,parent.fiscal_position,date_planned,False,False,parent.state,
						parent.price_type_id,price_type_id,discount_from_subtotal,context)
					</attribute>
				</field>
				<field name="product_uom" position="attributes">
					<attribute name="options">{'no_create': 1}</attribute>
					<attribute name="domain">
						[('category_id','=', uom_category_filter_id),('is_auto_create','=',False)]
					</attribute>
					<attribute name="on_change">
						onchange_product_tbvip(parent.pricelist_id,product_id,product_qty,product_uom,parent.partner_id,
						parent.date_order,parent.fiscal_position,date_planned,False,False,parent.state,
						parent.price_type_id,price_type_id,discount_from_subtotal,context)
					</attribute>
				</field>
				<field name="product_qty" position="after">
					<field name="uom_category_filter_id" invisible="1"/>
				</field>
				<xpath expr="//page[@string='RFQ &amp; Bid']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="//page[@string='Deliveries &amp; Invoices']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
			</field>
		</record>

		<record model="ir.ui.view" id="purchase_order_tree_inherit">
			<field name="name">purchase.order.tree.inherit</field>
			<field name="model">purchase.order</field>
			<field name="inherit_id" ref="purchase.purchase_order_tree"/>
			<field name="arch" type="xml">
				<field name="state" position="before">
					<field name="branch_id"/>
				</field>
				<field name="minimum_planned_date" position="replace">
					<field name="delivered_date"/>
				</field>
				<field name="amount_untaxed" position="replace"/>
				<field name="origin" position="replace"/>
				<field name="name" position="replace">
					<field name="name" string="Supplier Reference"/>
				</field>
			</field>
		</record>

		<record model="ir.ui.view" id="purchase_order_search">
			<field name="name">purchase.order.search</field>
			<field name="model">purchase.order</field>
			<field name="inherit_id" ref="purchase.view_purchase_order_filter"/>
			<field name="arch" type="xml">
				<xpath expr="//filter[@string='Expected Month']" position="after">
					<filter string="Delivered Month" icon="terp-go-month" domain="[]" context="{'group_by':'delivered_date'}"/>
					<filter name="groupby_day" string="Day" context="{'group_by':'date_order:day'}"/>
					<filter name="groupby_branch" string="Branch" context="{'group_by':'branch_id'}"/>
				</xpath>
			</field>
		</record>

		<record id="purchase.purchase_rfq" model="ir.actions.act_window">
			<field name="name">Draft Purchase Orders</field>
		</record>

		<record id="view_request_for_quotation_search_inherit" model="ir.ui.view">
			<field name="name">request.for.quotation.search.inherit</field>
			<field name="model">purchase.order</field>
			<field name="inherit_id" ref="purchase.view_request_for_quotation_filter"/>
			<field name="arch" type="xml">
				<search string="Search Purchase Order" position="inside">
					<filter string="Today" name="filter_date_order_today"
							domain="[('date_order','&gt;=',datetime.datetime.combine(context_today(), datetime.time(0,0,0))),
						('date_order','&lt;=',datetime.datetime.combine(context_today(), datetime.time(23,59,59)))]"/>
				</search>
			</field>
		</record>

	</data>
</openerp>
